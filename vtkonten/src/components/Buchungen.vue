<script setup>
import { computed } from '@vue/reactivity';
import { ref } from 'vue'

const props = defineProps(['modelValue'])
defineEmits(['update:modelValue'])

const kontendef = ref("Bank,Kasse")

const konten = computed(() => {
  return kontendef.value.split(",");
});

const farben = ref([
  {val:"",name:""},
  {val:"#D3D3D3",name:"grau"},
  {val:"#FFFACD",name:"gelb"},
  {val:"#ADD8E6",name:"blau"},
  {val:"#F08080",name:"rot"},
  {val:"#90EE90",name:"gr√ºn"}
])


function addRow() {
  props.modelValue.push({
    zeile: props.modelValue.length + 1,
    text: '',
    ksoll: '',
    btrsoll: '',
    khaben: '',
    btrhaben: '',
    color: ''
  })
}
</script>

<template>
  <input v-model="kontendef" />
  <table>
    <tr>
      <th>Zeile</th>
      <th>Text</th>
      <th>Soll</th>
      <th>Betrag</th>
      <th></th>
      <th>Haben</th>
      <th>Betrag</th>
      <th>Farbe</th>
    </tr>
    <tr v-for="buchung in modelValue">
      <td>{{ buchung.zeile }}
      </td>
      <td><input v-model="buchung.text" />
      </td>
      <td>
        <select v-model="buchung.ksoll">
          <option v-for="k in konten">{{ k }}</option>
        </select>
      </td>
      <td class="btr"><input v-model="buchung.btrsoll" /></td>
      <td>an</td>
      <td>
        <select v-model="buchung.khaben">
          <option v-for="k in konten">{{ k }}</option>
        </select>
      </td>
      <td class="btr"><input v-model="buchung.btrhaben" /></td>
      <td>
        <select v-model="buchung.color">
          <option v-for="f in farben" :value="f.val">{{ f.name }}</option>
        </select>
      </td>
    </tr>
  </table>

  <a @click="addRow">Add row</a>
</template>

<style scoped>
input {
  width: 80%;
}

.btr input {
  width: 60px;
  text-align: right;
}
</style>
